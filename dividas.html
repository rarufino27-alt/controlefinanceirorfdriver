<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de Dívidas e Despesas</title>

  <style>
    :root{
      --bg:#0f1115;--card:#181b22;--text:#eaeaf0;--muted:#9aa0aa;
      --accent:#f5c542;--danger:#ff5c5c;--ok:#2ecc71;
    }
    *{box-sizing:border-box;font-family:Inter,Arial,sans-serif}
    body{margin:0;background:var(--bg);color:var(--text)}
    header{padding:16px;text-align:center;border-bottom:1px solid #222}
    header h1{margin:0;color:var(--accent)}
    header p{margin:6px 0 0;font-size:.85rem;color:var(--muted)}
    main{max-width:480px;margin:auto;padding:16px;display:flex;flex-direction:column;gap:16px}
    .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    h2{margin:0 0 10px;color:var(--accent)}
    input,select{width:100%;padding:10px;border-radius:10px;border:none;background:#222634;color:var(--text);margin-bottom:8px}
    button{width:100%;padding:10px;border-radius:10px;border:none;background:var(--accent);color:#000;font-weight:700;cursor:pointer}
    .btn-del{background:#2a2e3d;color:#fff;font-size:.8rem;padding:4px 8px;border-radius:6px}
    ul{list-style:none;padding:0;margin:0}
    li{padding:6px 0;border-bottom:1px solid #2a2e3d;font-size:.9rem;display:flex;justify-content:space-between;gap:8px}
    footer{text-align:center;font-size:.75rem;color:var(--muted);padding:12px}
  </style>
</head>
<body>

<header>
  <h1>Dívidas & Despesas</h1>
  <p>Cadastre obrigações reais com recorrência e impacto correto</p>
</header>

<main>

  <div class="card">
    <h2>Novo Registro</h2>
    <input id="nome" placeholder="Descrição" />
    <select id="tipo">
      <option value="divida">Dívida</option>
      <option value="despesa">Despesa</option>
    </select>
    <input id="valor" type="number" placeholder="Valor da parcela ou cobrança" />
    <select id="periodo">
      <option value="diario">Diário</option>
      <option value="semanal">Semanal</option>
      <option value="mensal" selected>Mensal</option>
    </select>
    <input id="dia" type="number" placeholder="Dia fixo (se mensal)" />
    <button onclick="adicionar()">Adicionar</button>
  </div>

  <div class="card">
    <h2>Registros Ativos</h2>
    <ul id="lista"></ul>
  </div>

  <div class="card">
    <h2>IA – Leitura Financeira</h2>
    <div id="ia"></div>
  </div>

</main>

<footer>
  <a href="index.html" style="color:#f5c542;text-decoration:none">← Voltar ao Dashboard</a>
</footer>

<script>
const $ = id => document.getElementById(id);
const getArr = k => JSON.parse(localStorage.getItem(k)||'[]');
const setArr = (k,v) => localStorage.setItem(k, JSON.stringify(v));

function adicionar(){
  const item={
    nome:nome.value,
    tipo:tipo.value,
    valor:Number(valor.value),
    periodo:periodo.value,
    dia:Number(dia.value||0)
  };
  const arr=getArr('registros');
  arr.push(item);
  setArr('registros',arr);
  render(); analisar();
}

function remover(i){
  const arr=getArr('registros');
  arr.splice(i,1);
  setArr('registros',arr);
  render(); analisar();
}

function render(){
  lista.innerHTML='';
  getArr('registros').forEach((r,i)=>{
    lista.innerHTML+=`<li><span>${r.nome} – R$ ${r.valor} (${r.periodo})</span><button class="btn-del" onclick="remover(${i})">X</button></li>`;
  });
}

function analisar(){
  const arr=getArr('registros');
  if(!arr.length){ ia.innerText='Cadastre suas dívidas e despesas para receber análises.'; return; }

  const mensal=arr.filter(r=>r.periodo==='mensal').reduce((s,r)=>s+r.valor,0);
  const diario=arr.filter(r=>r.periodo==='diario').reduce((s,r)=>s+r.valor*30,0);

  let msg=`Seu comprometimento mensal estimado é R$ ${(mensal+diario).toFixed(2)}. `;

  if(diario>mensal*0.4) msg+='Despesas diárias estão muito altas. Tente renegociar ou reduzir.';
  else msg+='Distribuição saudável entre despesas e dívidas.';

  ia.innerText=msg;
}

render(); analisar();
</script>

</body>
</html>
