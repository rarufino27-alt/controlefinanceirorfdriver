<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resumo Financeiro Estratégico</title>  <style>
    :root{
      --bg:#0f1115;--card:#181b22;--text:#eaeaf0;--muted:#9aa0aa;
      --accent:#f5c542;--danger:#ff5c5c;--ok:#2ecc71;--warn:#f39c12;
    }
    *{box-sizing:border-box;font-family:Inter,Arial,sans-serif}
    body{margin:0;background:var(--bg);color:var(--text)}
    header{padding:16px;text-align:center;border-bottom:1px solid #222}
    header h1{margin:0;color:var(--accent)}
    header p{margin:6px 0 0;font-size:.85rem;color:var(--muted)}
    main{max-width:480px;margin:auto;padding:16px;display:flex;flex-direction:column;gap:16px}
    .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.35)}
    h2{margin:0 0 10px;color:var(--accent)}
    .row{display:flex;justify-content:space-between;margin:6px 0}
    .ok{color:var(--ok)}
    .bad{color:var(--danger)}
    .warn{color:var(--warn)}
    footer{text-align:center;font-size:.75rem;color:var(--muted);padding:12px}
  </style></head>
<body><header>
  <h1>Resumo Financeiro</h1>
  <p>Leitura clara do cenário e decisões estratégicas</p>
</header><main>  <div class="card">
    <h2>Último Dia Processado</h2>
    <div class="row"><span>Resultado líquido</span><strong id="diaLiquido">–</strong></div>
    <div class="row"><span>Status</span><strong id="diaStatus">–</strong></div>
  </div>  <div class="card">
    <h2>Visão do Mês (estimada)</h2>
    <div class="row"><span>Custos operacionais</span><strong id="mesCustos">–</strong></div>
    <div class="row"><span>Obrigações fixas</span><strong id="mesFixos">–</strong></div>
    <div class="row"><span>Sobra estimada</span><strong id="mesSobra">–</strong></div>
  </div>  <div class="card">
    <h2>IA – Leitura Estratégica</h2>
    <div id="ia"></div>
  </div></main><footer>
  <a href="index.html" style="color:#f5c542;text-decoration:none">← Voltar ao Dashboard</a>
</footer><script>
const getArr = k => JSON.parse(localStorage.getItem(k)||'[]');

(function carregarResumo(){
  const ultimo = JSON.parse(localStorage.getItem('ultimoResumo')||'{}');
  const registros = getArr('registros');

  if(ultimo.liquido !== undefined){
    document.getElementById('diaLiquido').innerText = 'R$ ' + ultimo.liquido.toFixed(2);
    document.getElementById('diaStatus').innerText = ultimo.ok ? 'Sustentável' : 'Insuficiente';
    document.getElementById('diaStatus').className = ultimo.ok ? 'ok' : 'bad';
  }

  let fixos = 0;
  registros.forEach(r=>{
    if(r.periodo==='mensal') fixos += r.valor;
    if(r.periodo==='diario') fixos += r.valor*30;
    if(r.periodo==='semanal') fixos += r.valor*4;
  });

  const custos = ultimo.liquido !== undefined ? 0 : 0; // placeholder para histórico futuro

  document.getElementById('mesCustos').innerText = 'R$ ' + custos.toFixed(2);
  document.getElementById('mesFixos').innerText = 'R$ ' + fixos.toFixed(2);

  const sobra = ultimo.liquido !== undefined ? ultimo.liquido*22 - fixos : 0;
  document.getElementById('mesSobra').innerText = 'R$ ' + sobra.toFixed(2);
  document.getElementById('mesSobra').className = sobra >= 0 ? 'ok' : 'bad';

  gerarIA(sobra, fixos);
})();

function gerarIA(sobra, fixos){
  let msg='';

  if(fixos === 0){
    msg = 'Nenhuma obrigação registrada. Cadastre despesas e dívidas para uma leitura real.';
  } else if(sobra < 0){
    msg = 'O mês está negativo. Prioridade absoluta: reduzir custos ou renegociar dívidas.';
  } else if(sobra < fixos*0.2){
    msg = 'Margem muito apertada. Evite qualquer gasto não essencial.';
  } else {
    msg = 'Cenário controlado. Mantenha disciplina e avance na quitação das dívidas.';
  }

  document.getElementById('ia').innerText = msg;
}
</script></body>
</html>